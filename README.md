# 操作系统
  ## 2.1 操作系统的目标和功能
  操作系统：是控制应用程序执行的程序，应用程序和计算机硬件间的接口。
操作系统的三个目标：
| 名称 | 作用 |
| ------|--------|
|方便 | 操作系统使计算机更易于使用 |
|有效 | 操作系统允许以更有效的方式使用计算机系统资源 |
|扩展能力 | 在构造操作系统时，应允许在不妨碍服务的前提下，有效地开发、测试和引入新的系统功能|
  ### 2.1.1 作为用户/计算机接口的操作系统
  为用户提供应用的硬件和软件可视为一种层次结构。
操作系统通常提供了以下几个方面的服务：
|名称 | 说明 |
|-----|-----|
|程序开发 |为帮助程序员开发程序，操作系统提供各种各样的工具和服务。|
|程序运行 |运行一个程序需要很多步骤。|
| I/O设备访问|每个I/OS设备的操作都需要自身特有的指令或控制信号。  | 
|文件访问控制|队友多个用户的系统，操作系统还可提供保护机制来控制对文件的访问。|
|系统访问|这功能模块必须提供对资源和数据的保护，以避免未授权用户的访问，还必须解决资源竞争时的冲突问题。|
|错误检测和响应|计算机系统运行时可能发生各种各样的错误，包含内部和外部硬件错误，以及各种软件错误。|
|记账|信息对于预测将来增强功能的需求及调整系统提高性能都是很有用的。|
|指令系统体系结构（ISA）|它定义了计算机遵循的机器语言指令系统。|
|应用程序二进制接口(ABI)|这种接口定义了程序间二进制可移植性的标准。|
|应用程序编程接口（API)|API允许应用程序访问系统的硬件资源和服务。|
  ### 2.1.2 作为资源管理器的操作系统
  通常，控制机在被控制对象外，或至少与被控制对象有一些差别和距离。但操作系统不属于这种情况，它的控制机制有两个方面不同：

1）操作系统与普通计算机软件的作用相同，即它时由处理器执行的一段程序或一组程序。


2）操作系统经常会释放控制，而且必须依然处理器才能恢复控制。


  操作系统的一部分在内存中，包括**内核程序**和当前正在使用的其他操作系统程序。

内核程序包含操作系统中最常用的功能。

内存的其余部分包含用户程序、实用程序的数据，它的分配由操作系统和处理器中中的内存管理硬件联合控制完成。


### 2.1.3 操作系统的易扩展性


  1） 硬件升级和新型硬件的出现。

  2） 新的服务

  3）纠正错误

------------------------------------------------

## 2.2 操作系统的演化
  ### 2.2.1 串行处理
    早期系统的两个问题：

    1）调度：大多数装置都使用硬拷贝登记表来预机器的时间。通常，用户可以以半小时为单位登记一段时间。有时，用户登记1小时而仅用45分钟就完成了工作，乘下的时间里计算机只能闲置，这是就会导致浪费。另一方面，用户因遇到问题而未在分配的时间内完成工作，在解决问题前会被强制停止。

    2）准备时间：称为作业的单个程序，在程序运行前的准备工作需要花费大量的时间。
    这种操作模式称为串行处理，它反映了用户必须顺序访问计算机的事实。

 
  ### 2.2.2 简单批处理系统
    早期的计算机非常昂贵、由于调度和准备而浪费的时间令人难以接受。所以，Genenral Motors开发了批处理系统, 是IBM701。为了了解IBM701的方案，两个角度进行分析：监控程序与处理器角度。


    1)监控程序角度：监控程序控制时间的顺序。大部分监控程序必须总是处于额你存中并且可以执行，称为常驻监控程序（resident monitor)。监控程序每次从输入设备中读取一个作业。读入后，当前作业被放置到用户程序区域，并且把控制权交给这个作业。作业完成后，它将控制权返回给监控程序，监控程序立即读取下一个作业。每个作业的结果被发送到输出设备，交付给用户。

    2)处理器角度：处理器执行内存的监控程序中的指令，这些指令都如下一个作业并存储到内存另一部分中。读入一个作业后，处理器将会遇到监控程序的分支指令，分支指令指导处理器在用户程序的开始处继续执行。处理器继而执行用户程序中的指令，直到遇到一个结束指令或错误条件。


    监控程序完成调度功能：一批作业排队等待，处理器尽可能迅速地执行作业，没有任何空闲时间。监控程序还改善了作业的准备时间。每个作业中的指令均以一种作业控制语言的基本形式给出。这是一种特殊的程序设计语言，用于未监控程序提供指令。






监控程序依赖于处理器可从内存的不同部分取指令的能力，交替地获取或释放控制权。此外，其他硬件的功能：

  1。内存保护：当用户程序正在运行时，不能改变包含监控程序的内存区域。如果处理器硬件发现错误，并将控制权转交给监控程序，监控程序取消这个作业，输出错误信息，并加载下一个作业。

  2。定时器：定时器用于防止一个作业独占系统。

  3。指令：某些机器指令被设计成特权指令，只能由看监控程序指令。例如，I/O指令属于特权指令，因此监控程序可以控制所有I/O设备。此外，还可避免用户程序为自己执行这一操作。  

4. 中断：这个特征使得操作系统在让用户程序放弃控制权或从用户程序获得控制权时，具有更大的灵活性.


内存保护和特权指令引出了运行模式地概念。

  1.用户程序以用户模式执行，此时有些内存区域是受保护的，特权指令也不允许执行。

  2.监控程序以系统模式或内核模式执行，此时不仅可以执行特权指令，而且可以访问保护的内存区域。




### 2.2.3 多道批处理系统

  与简单批处理系统一样，多道批出路系统必须依赖于某些计算机硬件，是I/O中断和直接内存访问的硬件（DMA）。通过中断驱动的I/O或DMA，处理器可为一个作业发出I/O命令，设备控制器执行I/O操作时，处理器执行执行另一个作业。
  准备运行多个作业时，处理器必须决定运行哪个作业，因此需要某种调度算法。
